<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="unifir">
<title>unifir 103 - Using Assets • unifir</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="unifir 103 - Using Assets">
<meta property="og:description" content="unifir">
<meta property="og:image" content="https://docs.ropensci.org/unifir/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">unifir</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.4.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/unifir-asset-guide.html">unifir 103 - Using Assets</a>
    <a class="dropdown-item" href="../articles/unifir-dev-guide.html">unifir 102 - A developer's guide</a>
    <a class="dropdown-item" href="../articles/unifir-user-guide.html">unifir 101 - A user's guide</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/unifir/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>unifir 103 - Using Assets</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/unifir/blob/HEAD/vignettes/unifir-asset-guide.Rmd" class="external-link"><code>vignettes/unifir-asset-guide.Rmd</code></a></small>
      <div class="d-none name"><code>unifir-asset-guide.Rmd</code></div>
    </div>

    
    
<p>This vignette supplements <a href="unifir-user-guide.html">unifir 101</a> and <a href="unifir-dev-guide.html">unifir 102</a> to get into the weeds of how you can add assets – which is to say, any sort of object or event that isn’t specifically provided by the Unity engine itself – into your Unity scenes. If you’re trying to build scenes with unifir, I recommend checking out unifir 101 first; if you’re looking to extend unifir, I recommend reading both the other vignettes to start. This vignette will be a bit shorter than the other two, focused entirely on how to import and instantiate assets in your world.</p>
<div class="section level2">
<h2 id="importing-assets">Importing Assets<a class="anchor" aria-label="anchor" href="#importing-assets"></a>
</h2>
<p>An “asset” in Unity is a really vague category – it’s any item you’re including in a scene, be it 3D models, code, audio, or really any other type of data. To get away from this vagueness, unifir uses a slightly more pragmatic definition: an asset is any file or directory you want to include in your Unity project.</p>
<p>Unity provides a neat format for moving collections of assets around, allowing you to compress folders into “unitypackage” files which can be imported into other projects. Unfortunately, importing these packages using Unity’s batchmode API currently does not work (and hasn’t worked for a number of years). So rather than deal with this format and Unity’s tools for moving data around, unifir just copies asset files directly into your project when running scripts through <code><a href="../reference/action.html">action()</a></code>.</p>
<p>That’s where the function <code><a href="../reference/import_asset.html">import_asset()</a></code> comes in. This function takes two main arguments: the script to add the prop to and the path to the asset to copy (either a single file or a directory, to copy recursively). For instance, let’s say we want to import all of the files stored at <code>example_asset</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_asset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.create</a></span><span class="op">(</span><span class="va">example_asset</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>We can import that using <code><a href="../reference/import_asset.html">import_asset()</a></code> as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/unifir/">unifir</a></span><span class="op">)</span></span>
<span><span class="va">script</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_script.html">make_script</a></span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"unifir"</span><span class="op">)</span>,</span>
<span>  unity <span class="op">=</span> <span class="fu"><a href="../reference/waiver.html">waiver</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># Makes it so make_script won't error if it can't find Unity</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">script</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_asset.html">import_asset</a></span><span class="op">(</span><span class="va">script</span>, <span class="va">example_asset</span><span class="op">)</span></span></code></pre></div>
<p>(For more information on <code><a href="../reference/waiver.html">waiver()</a></code>, check out unifir 102).</p>
<p>Now when we run <code><a href="../reference/action.html">action()</a></code> on this script, we’ll copy <code>example_asset</code> directly into the <code>Assets</code> folder of our Unity project. Note that this is done entirely in R, using <code>file.copy(..., recursive = TRUE)</code>, which has two main implications: first, this copy step won’t be present in your C# code anywhere, and secondly the original file structure will be preserved if <code>example_asset</code> points to a directory.</p>
<p>That second point is particularly important when it comes to actually using these objects in a scene, rather than just having them exist in your project. To talk about that, we should move along to:</p>
</div>
<div class="section level2">
<h2 id="instantiating-prefabs">Instantiating Prefabs<a class="anchor" aria-label="anchor" href="#instantiating-prefabs"></a>
</h2>
<p>There are a lot of ways to actually bring assets into a Unity scene as things that users will interact with or otherwise be affected by in your environment. The easiest one of those to work with, which is the only one unifir puts much thought into, is referred to as a “prefab”. A prefab is a Unity GameObject that incorporates external data and code, stored as a single file; for more information on prefabs and how to use them I’d recommend the official <a href="https://docs.unity3d.com/Manual/Prefabs.html" class="external-link">Unity documentation</a>. For our purposes, I’m going to assume you’ve already got a prefab created and you want to import it into your scene.</p>
<p>The first step in doing so is to use <code><a href="../reference/import_asset.html">import_asset()</a></code> in order to bring your prefab <em>file</em> (along with all the external files it relies on) into the Unity project. In order to turn that file into an actual object in the environment, we can use the <code><a href="../reference/instantiate_prefab.html">instantiate_prefab()</a></code> function from unifir. This function can work with just two arguments (though there are more, documented in <code><a href="../reference/instantiate_prefab.html">?instantiate_prefab</a></code>): the script object and the path to the prefab you want to instantiate.</p>
<p>Importantly, that path is relative to the Unity project root directory, <em>not</em> your current working directory. Since we used <code><a href="../reference/import_asset.html">import_asset()</a></code> to import our “asset” earlier, that means our asset is inside the “Assets” directory inside our Unity project, and we can instantiate it as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">script</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/instantiate_prefab.html">instantiate_prefab</a></span><span class="op">(</span><span class="va">script</span>,</span>
<span>                             prefab_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"Assets"</span>, </span>
<span>                                                     <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">example_asset</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>If you used <code><a href="../reference/import_asset.html">import_asset()</a></code> to import a directory, the file structure of your directory will be preserved. That means that, if <code>example_asset</code> were a directory containing a prefab at <code>sub_directory/example.prefab</code>, we’d set <code>prefab_path = Assets/example_asset/sub_directory/example.prefab</code> instead.</p>
<p>We can use the other arguments to <code><a href="../reference/instantiate_prefab.html">instantiate_prefab()</a></code> to customize our object further, specifying its location, rotation, and scaling as desired.</p>
</div>
<div class="section level2">
<h2 id="making-it-easier">Making it Easier<a class="anchor" aria-label="anchor" href="#making-it-easier"></a>
</h2>
<p>Because prefabs can exist at different locations in imported assets, and a single asset directory can contain multiple prefabs, unifir can’t automatically infer what prefab you’re trying to create with <code>instantiate_prefab</code>. That means every time you want to add GameObjects to a scene, you need to go through this two-step process with <code>import_asset</code> and <code>instantiate_prefab</code>, specifying the path to the asset to import and then the path to the prefab itself.</p>
<p>For a small set of objects, however, <code>unifir</code> makes things a bit easier. A collection of permissively-licensed assets at <a href="https://github.com/mikemahoney218/unity_assets/" class="external-link">https://github.com/mikemahoney218/unity_assets/</a> can be automatically added to the scene using the helper functions <code>add_default_player</code> and <code>add_default_tree</code>. Those functions will handle downloading assets, importing them into Unity, and instantiating the prefabs, making it easy to add player controllers and 3D trees to your scene. These objects are also all permissively licensed – the controllers are currently all MIT-licensed, while the trees are CC-0 1.0 – making them free to use in any of your projects.</p>
<p>The functions – which I’m wrapping here in <code>if (interactive())</code> to prevent them from downloading files on CRAN – take the same arguments as <code>instantiate_prefab</code> to let you specify position, scale, and rotation of your objects, but handle all the file path trickiness for you:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">script</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_asset.html">add_default_player</a></span><span class="op">(</span><span class="va">script</span><span class="op">)</span></span>
<span>  <span class="va">script</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_asset.html">add_default_tree</a></span><span class="op">(</span><span class="va">script</span>, <span class="st">"tree_1"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>If you have any (permissively-licensed – no GPL or CC-BY) assets you’d like to share as part of this set, <a href="https://github.com/mikemahoney218/unity_assets/issues" class="external-link">open an issue on GitHub!</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
